image: registry.console.elementai.com/snow.colab/cuda
data: 
    - snow.gabrielhuang_snow.home:/mnt/home
    - snow.colab.public:/mnt/public
resources:
    cpu: 64
    mem: 256
    gpu: 8
interactive: false
preemptable: true
command:
    - /mnt/home/miniconda3/envs/mae/bin/python
    - -m
    - torch.distributed.launch
    - --nproc_per_node=8
    - main_finetune.py
    - --accum_iter
    - 1
    - --batch_size
    - 128
    - --model
    - vit_base_patch16
    - --finetune
    - output/pretrain_node1_gpu8_bs256_accum2/checkpoint-799.pth
    - --blr
    - 5e-4
    - --layer_decay
    - 0.65
    - --weight_decay
    - 0.05
    - --drop_path
    - 0.1
    - --mixup
    - 0.8
    - --cutmix
    - 1.0
    - --reprob
    - 0.25
    - --dist_eval
    - --data_path
    - /mnt/public/datasets/imagenet/raw/
    - --output_dir
    - output/eai_finetune_node1_gpu8_bs128
    - --log_dir
    - output/eai_finetune_node1_gpu8_bs128
workdir: /mnt/home/code/mae
